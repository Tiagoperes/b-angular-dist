import { __assign } from "tslib";
import { findById } from '@zup-it/beagle-web/dist/utils/tree-reading';
var views = {};
function createContext(view, elementId) {
    return {
        replace: function (params) { return view.updateWithFetch(params, elementId, 'replace'); },
        append: function (params) { return view.updateWithFetch(params, elementId, 'append'); },
        prepend: function (params) { return view.updateWithFetch(params, elementId, 'prepend'); },
        updateWithTree: function (params) { return view.updateWithTree(__assign(__assign({}, params), { elementId: elementId })); },
        getElementId: function () { return elementId; },
        getElement: function () { return findById(view.getTree(), elementId); },
        getView: function () { return view; }
    };
}
export function getContext(viewId, elementId) {
    if (!viewId || !elementId)
        throw Error('Beagle: getContext couldn\'t find viewId or elementId');
    var view = views[viewId];
    if (!view)
        throw Error("Beagle: getContext couldn't find view with id " + viewId);
    return createContext(view, elementId);
}
export function registerView(viewId, view) {
    views[viewId] = view;
}
export function unregisterView(viewId) {
    delete views[viewId];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2JlYWdsZS1hbmd1bGFyLyIsInNvdXJjZXMiOlsicnVudGltZS9iZWFnbGUtY29udGV4dC9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sNENBQTRDLENBQUE7QUFHckUsSUFBTSxLQUFLLEdBQStCLEVBQUUsQ0FBQTtBQUU1QyxTQUFTLGFBQWEsQ0FBSSxJQUFtQixFQUFFLFNBQWlCO0lBQzlELE9BQU87UUFDTCxPQUFPLEVBQUUsVUFBQSxNQUFNLElBQUksT0FBQSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDLEVBQWxELENBQWtEO1FBQ3JFLE1BQU0sRUFBRSxVQUFBLE1BQU0sSUFBSSxPQUFBLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUMsRUFBakQsQ0FBaUQ7UUFDbkUsT0FBTyxFQUFFLFVBQUEsTUFBTSxJQUFJLE9BQUEsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxFQUFsRCxDQUFrRDtRQUNyRSxjQUFjLEVBQUUsVUFBQSxNQUFNLElBQUksT0FBQSxJQUFJLENBQUMsY0FBYyx1QkFBTSxNQUFNLEtBQUUsU0FBUyxXQUFBLElBQUcsRUFBN0MsQ0FBNkM7UUFDdkUsWUFBWSxFQUFFLGNBQU0sT0FBQSxTQUFTLEVBQVQsQ0FBUztRQUM3QixVQUFVLEVBQUUsY0FBTSxPQUFBLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsU0FBUyxDQUFDLEVBQW5DLENBQW1DO1FBQ3JELE9BQU8sRUFBRSxjQUFNLE9BQUEsSUFBSSxFQUFKLENBQUk7S0FDcEIsQ0FBQTtBQUNILENBQUM7QUFFRCxNQUFNLFVBQVUsVUFBVSxDQUFDLE1BQWMsRUFBRSxTQUFpQjtJQUMxRCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsU0FBUztRQUFFLE1BQU0sS0FBSyxDQUFDLHVEQUF1RCxDQUFDLENBQUE7SUFFL0YsSUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQzFCLElBQUksQ0FBQyxJQUFJO1FBQUUsTUFBTSxLQUFLLENBQUMsbURBQWtELE1BQVEsQ0FBQyxDQUFBO0lBRWxGLE9BQU8sYUFBYSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQTtBQUN2QyxDQUFDO0FBRUQsTUFBTSxVQUFVLFlBQVksQ0FBQyxNQUFNLEVBQUUsSUFBZ0I7SUFDbkQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQTtBQUN0QixDQUFDO0FBRUQsTUFBTSxVQUFVLGNBQWMsQ0FBQyxNQUFNO0lBQ25DLE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBQ3RCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCZWFnbGVWaWV3IH0gZnJvbSAnQHp1cC1pdC9iZWFnbGUtd2ViJ1xuaW1wb3J0IHsgZmluZEJ5SWQgfSBmcm9tICdAenVwLWl0L2JlYWdsZS13ZWIvZGlzdC91dGlscy90cmVlLXJlYWRpbmcnXG5pbXBvcnQgeyBCZWFnbGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vdHlwZXMnXG5cbmNvbnN0IHZpZXdzOiBSZWNvcmQ8c3RyaW5nLCBCZWFnbGVWaWV3PiA9IHt9XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHQ8VD4odmlldzogQmVhZ2xlVmlldzxUPiwgZWxlbWVudElkOiBzdHJpbmcpOiBCZWFnbGVDb250ZXh0PFQ+IHtcbiAgcmV0dXJuIHtcbiAgICByZXBsYWNlOiBwYXJhbXMgPT4gdmlldy51cGRhdGVXaXRoRmV0Y2gocGFyYW1zLCBlbGVtZW50SWQsICdyZXBsYWNlJyksXG4gICAgYXBwZW5kOiBwYXJhbXMgPT4gdmlldy51cGRhdGVXaXRoRmV0Y2gocGFyYW1zLCBlbGVtZW50SWQsICdhcHBlbmQnKSxcbiAgICBwcmVwZW5kOiBwYXJhbXMgPT4gdmlldy51cGRhdGVXaXRoRmV0Y2gocGFyYW1zLCBlbGVtZW50SWQsICdwcmVwZW5kJyksXG4gICAgdXBkYXRlV2l0aFRyZWU6IHBhcmFtcyA9PiB2aWV3LnVwZGF0ZVdpdGhUcmVlKHsgLi4ucGFyYW1zLCBlbGVtZW50SWQgfSksXG4gICAgZ2V0RWxlbWVudElkOiAoKSA9PiBlbGVtZW50SWQsXG4gICAgZ2V0RWxlbWVudDogKCkgPT4gZmluZEJ5SWQodmlldy5nZXRUcmVlKCksIGVsZW1lbnRJZCksXG4gICAgZ2V0VmlldzogKCkgPT4gdmlld1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0KHZpZXdJZDogc3RyaW5nLCBlbGVtZW50SWQ6IHN0cmluZykge1xuICBpZiAoIXZpZXdJZCB8fCAhZWxlbWVudElkKSB0aHJvdyBFcnJvcignQmVhZ2xlOiBnZXRDb250ZXh0IGNvdWxkblxcJ3QgZmluZCB2aWV3SWQgb3IgZWxlbWVudElkJylcblxuICBjb25zdCB2aWV3ID0gdmlld3Nbdmlld0lkXVxuICBpZiAoIXZpZXcpIHRocm93IEVycm9yKGBCZWFnbGU6IGdldENvbnRleHQgY291bGRuXFwndCBmaW5kIHZpZXcgd2l0aCBpZCAke3ZpZXdJZH1gKVxuXG4gIHJldHVybiBjcmVhdGVDb250ZXh0KHZpZXcsIGVsZW1lbnRJZClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyVmlldyh2aWV3SWQsIHZpZXc6IEJlYWdsZVZpZXcpIHtcbiAgdmlld3Nbdmlld0lkXSA9IHZpZXdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVucmVnaXN0ZXJWaWV3KHZpZXdJZCkge1xuICBkZWxldGUgdmlld3Nbdmlld0lkXVxufVxuIl19